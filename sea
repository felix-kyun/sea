#!/usr/bin/env bash

# sea
# utility helper for launching various sea tools

CURRENT_DIR=$(dirname "$(readlink -f "$0")")

launch_util() {
    [[ ! -f "${CURRENT_DIR}/${1}/launch.sh" ]] && {
        echo "Error: Script ${CURRENT_DIR}/${1}/launch.sh does not exist"
        exit 1
    }

    bash "${CURRENT_DIR}/${1}/launch.sh" "${@:3}" & disown
}

util_handler() {
    # launch if no other args are given
    [[ -z "$2" ]] && launch_util "$1"
}

case "$1" in
    kill)
        pkill -f "$2" || {
            echo "Error: Unable to kill sea processes"
            exit 1
        }
    ;;
    killall)
        pkill -f "sea" || {
            echo "Error: Unable to kill all sea processes"
            exit 1
        }
    ;;
    *)
        util_handler ${@}
    ;;
esac
